(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{144:function(e,t,n){},145:function(e,t,n){},182:function(e,t,n){},183:function(e,t,n){},186:function(e,t,n){},187:function(e,t,n){},189:function(e,t,n){},190:function(e,t,n){"use strict";n.r(t);var r=n(2),c=n(0),a=n(11),o=n.n(a),s=n(24),i=n(19),u=n(104),l=n(7),p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_TOKEN":return Object(l.a)(Object(l.a)({},e),{},{token:t.token});case"SET_DEVICE_ID":return Object(l.a)(Object(l.a)({},e),{},{deviceId:t.id});default:return e}},d={user:{id:null,display_name:null,display_picture:null}},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_USER_SUCCESS":return Object(l.a)(Object(l.a)({},e),{},{user:t.user,fetchUserError:!1});case"FETCH_USER_ERROR":return Object(l.a)(Object(l.a)({},e),{},{fetchUserError:!0});default:return e}},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CONTAINS_CURRENT_SUCCESS":return Object(l.a)(Object(l.a)({},e),{},{containsCurrent:t.contains.data.includes(!0)});default:return e}},f={view:"browse",modal:!1},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_NEW_VIEW":return Object(l.a)(Object(l.a)({},e),{},{view:t.view});case"SET_MODAL":return Object(l.a)(Object(l.a)({},e),{},{modal:t.modal,mode:t.mode});default:return e}},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_STATUS_SUCCESS":return Object(l.a)(Object(l.a)({},e),{},{status:t.status});default:return e}},h=Object(i.c)({sessionReducer:p,userReducer:j,libraryReducer:b,uiReducer:m,playerReducer:O}),v=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||i.d,y=Object(i.e)(h,v(Object(i.a)(u.a))),x=n(14),g=n(57),S=n(15),k=n(8),_=n.n(k),w=n(17),C=n(35),N=n.n(C),E=N.a.create({baseURL:"https://api.spotify.com/v1",headers:{}}),R=function(e){return E.put("/me/player",{device_ids:[e],play:!1}),{type:"SET_DEVICE"}},T=function(e){return{type:"SET_DEVICE_ID",id:e}},I=function(e){return{type:"FETCH_STATUS_SUCCESS",status:e}},A=function(){return E.post("/me/player/next"),{type:"CHANGE_SONG"}},K=function(){return E.post("/me/player/previous"),{type:"CHANGE_SONG"}},U=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;return e&&t?E.put("/me/player/play",{context_uri:e,offset:{position:t}}):e?E.put("/me/player/play",{context_uri:e}):E.put("/me/player/play"),{type:"PLAY_STATE"}},D=function(e,t){return E.put("/me/player/play",{uris:e,offset:{position:t}}),{type:"PLAY_STATE"}},F=function(){return E.put("/me/player/pause"),{type:"PAUSE_STATE"}},P=function(e){return E.put("/me/player/seek?position_ms=".concat(e)),{type:"SEEK_SONG"}},L=(n(144),n(31)),H=n(34),V=n(32),z=function(e){return function(){var t=Object(w.a)(_.a.mark((function t(n){var r;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,E.get("/me/tracks/contains?ids=".concat(e));case 3:return r=t.sent,n({type:"CONTAINS_CURRENT_SUCCESS",contains:r}),t.abrupt("return",r.data);case 8:return t.prev=8,t.t0=t.catch(0),t.abrupt("return",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},J=n(105),B=function(e){var t=function(t){Object(H.a)(c,t);var n=Object(V.a)(c);function c(){var t;Object(L.a)(this,c);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return(t=n.call.apply(n,[this].concat(o))).render=function(){return Object(r.jsx)(e,Object(l.a)(Object(l.a)({},t.props),{},{playContext:function(e,n){return t.props.playSong(e,n)},playSong:function(){return t.props.playSong()}}))},t}return Object(J.a)(c,[{key:"shouldComponentUpdate",value:function(e){return e.playing||this.props.playing&&!e.playing}},{key:"componentDidUpdate",value:function(e){if(e.currentSong.id!==this.props.currentSong.id){var t=this.props.currentSong.id,n=this.props.currentSong.linked_from?this.props.currentSong.linked_from.id:null;this.props.containsCurrentSong(n?"".concat(t,",").concat(n):t)}}}]),c}(c.Component);return Object(s.b)((function(e){return{currentSong:e.playerReducer.status?e.playerReducer.status.track_window.current_track:{},contains:!!e.libraryReducer.containsCurrent,trackPosition:e.playerReducer.status?e.playerReducer.status.position:0,playing:!!e.playerReducer.status&&!e.playerReducer.status.paused}}),(function(e){return Object(i.b)({nextSong:A,previousSong:K,pauseSong:F,playSong:U,seekSong:P,containsCurrentSong:z},e)}))(t)},G=(n(145),B((function(e){var t;return t=e.trackCover?e.trackCover:e.currentSong.album?e.currentSong.album.images[2].url:"",e.currentSong.album||e.trackCover?Object(r.jsx)("div",{className:"cover",style:{float:"left",paddingRight:"10px"},children:Object(r.jsx)("img",{class:"cover",alt:"cover",style:{width:e.size,height:e.size,padding:e.trackCover?"5px":""},src:t})}):null})));var W=function(e){var t=function(t){Object(H.a)(c,t);var n=Object(V.a)(c);function c(){var t;Object(L.a)(this,c);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return(t=n.call.apply(n,[this].concat(o))).render=function(){return Object(r.jsx)(e,Object(l.a)({},t.props))},t}return c}(c.Component);return Object(s.b)(null)(t)}(function(e){var t=function(t){Object(H.a)(c,t);var n=Object(V.a)(c);function c(){var t;Object(L.a)(this,c);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return(t=n.call.apply(n,[this].concat(o))).render=function(){return Object(r.jsx)(e,Object(l.a)({},t.props))},t}return c}(c.Component);return Object(s.b)((function(e){return{currentUri:e.playerReducer.status?e.playerReducer.status.context.uri:null,currentSong:e.playerReducer.status?e.playerReducer.status.track_window.current_track.linked_from.id||e.playerReducer.status.track_window.current_track.id:null,playing:!!e.playerReducer.status&&!e.playerReducer.status.paused}}),(function(e){return Object(i.b)({pauseSong:F,playSong:U,playTracks:D,containsCurrentSong:z},e)}))(t)}((function(e){var t=e.artists.length;return Object(r.jsxs)("div",{className:"details-section",children:[Object(r.jsx)(G,{size:"56px"}),Object(r.jsx)("div",{className:"details-section-song-name",children:Object(r.jsx)("p",{children:e.songName})}),Object(r.jsx)("div",{className:"details-section-artist-name",children:e.artists.map((function(n,c){return Object(r.jsxs)("span",{children:[Object(r.jsx)("span",{className:"artist",onClick:function(){return e.onArtistClick(n.uri.split(":")[2])},children:n.name},c),c+1!==t?", ":""]},c)}))})]})}))),M=function(e){return Object(r.jsx)("div",{className:"control-btn "+e.className,onClick:e.onClick,children:Object(r.jsx)("i",{className:"fa "+e.icon})})};var X=function(e){return Object(r.jsxs)("div",{className:"song-control",children:[Object(r.jsx)(M,{onClick:function(){return e.shuffle(!e.shuffleActive)},className:"shuffle-song"+(e.shuffleActive?" active":""),icon:"fa-random"}),Object(r.jsx)(M,{className:"back-song",icon:"fa-step-backward reverse",onClick:e.previousSong}),Object(r.jsx)(M,{className:"play-btn",onClick:e.playing?e.pauseSong:e.playSong,icon:"play-btn "+(e.playing?"fa-pause-circle-o":"fa-play-circle-o"),playBtn:!0}),Object(r.jsx)(M,{className:"next-song",icon:"fa-step-forward forward",onClick:e.nextSong}),Object(r.jsx)(M,{onClick:function(){return e.repeatContext(e.repeatActive?"off":"context")},className:"repeat-song"+(e.repeatActive?" active":""),icon:"fa-retweet"})]})},Y=n(63),Z=n(37),q=function(e){var t=e.value,n=e.style,c=e.className;return Object(r.jsx)("div",{className:c,style:Object.assign({},{position:"absolute",borderRadius:4},{top:0,bottom:0,left:0,width:"".concat(100*t,"%")},n)})},Q=function(e){var t=e.value,n=e.style,c=e.className;return Object(r.jsx)("div",{className:c,style:Object.assign({},{position:"absolute",width:10,height:10,borderRadius:"100%",transform:"scale(1)",transition:"transform 0.2s","&:hover":{transform:"scale(1.3)"}},{top:0,left:"".concat(100*t,"%"),marginTop:-3,marginLeft:-8},n)})},$=function(e){var t=e.isEnabled,n=e.direction,c=void 0===n?Z.Direction.HORIZONTAL:n,a=e.value,o=Object(Y.a)(e,["isEnabled","direction","value"]);return Object(r.jsxs)("div",{className:"song-sider-container",children:[Object(r.jsx)(Z.FormattedTime,{numSeconds:o.position}),Object(r.jsxs)(Z.Slider,Object(l.a)(Object(l.a)({isEnabled:t,direction:c,className:"song-sider",style:{cursor:"pointer"}},o),{},{children:[Object(r.jsx)(q,{className:"position-sider",direction:c,value:a}),Object(r.jsx)(Q,{className:"handler-sider",direction:c,value:a})]})),Object(r.jsx)(Z.FormattedTime,{numSeconds:o.duration||0})]})},ee=function(e){var t=e.value,n=e.style,c=e.className;return Object(r.jsx)("div",{className:c,style:Object.assign({},{position:"absolute",borderRadius:4},{top:0,bottom:0,left:0,width:"".concat(100*t,"%")},n)})},te=function(e){var t=e.value,n=e.style,c=e.className;return Object(r.jsx)("div",{className:c,style:Object.assign({},{position:"absolute",width:10,height:10,borderRadius:"100%",transform:"scale(1)",transition:"transform 0.2s","&:hover":{transform:"scale(1.3)"}},{top:0,left:"".concat(100*t,"%"),marginTop:-3,marginLeft:-8},n)})},ne=function(e){var t=e.isEnabled,n=e.direction,c=void 0===n?Z.Direction.HORIZONTAL:n,a=e.value,o=Object(Y.a)(e,["isEnabled","direction","value"]),s=a>.5?"fa-volume-up":0===a?"fa-volume-off":"fa-volume-down";return Object(r.jsxs)("div",{className:"volume-sider-container",children:[Object(r.jsx)("i",{onClick:o.onClick,className:"volumen fa "+s,"aria-hidden":"true"}),Object(r.jsxs)(Z.Slider,Object(l.a)(Object(l.a)({isEnabled:t,direction:c,className:"volume-sider",style:{cursor:"pointer"}},o),{},{children:[Object(r.jsx)(ee,{className:"position-sider",direction:c,value:a}),Object(r.jsx)(te,{className:"handler-sider",direction:c,value:a})]}))]})},re=function(e){Object(H.a)(n,e);var t=Object(V.a)(n);function n(){var e;Object(L.a)(this,n);for(var c=arguments.length,a=new Array(c),o=0;o<c;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={volume:1,previous:1,clicked:!1},e.changeVolume=function(e){E.put("/me/player/volume?volume_percent=".concat(Math.round(100*e)))},e.onOff=function(){e.setState((function(e){return{volume:0,previous:e.volume,clicked:!0}})),e.changeVolume(0)},e.onOn=function(){e.setState((function(e){return{volume:e.previous,clicked:!1}})),e.changeVolume(e.state.previous)},e.onClick=function(){e.state.clicked?0===e.state.volume?e.onOn():e.setState({clicked:!1}):e.onOff()},e.render=function(){return Object(r.jsx)("div",{className:"volume-control-container",children:Object(r.jsx)(ne,{value:e.state.volume,onClick:e.onClick,onChange:function(t){e.setState({volume:t})},onChangeEnd:function(t){e.setState({volume:t}),e.changeVolume(t)}})})},e}return n}(c.Component);var ce=B((function(e){function t(e){return e/1e3}var n=t(e.trackPosition)||0,c=e.currentSong?t(e.currentSong.duration_ms):1;return Object(r.jsxs)("div",{className:"player-container",children:[e.currentSong.id?Object(r.jsx)(W,{ids:e.currentSong.linked_from.id?"".concat(e.currentSong.linked_from.id,",").concat(e.currentSong.id):e.currentSong.id,contains:e.contains,songName:e.currentSong.name||"",album:e.currentSong.album.uri.split(":")[2],artists:e.currentSong.artists||[]}):null,Object(r.jsx)(X,Object(l.a)({},e)),Object(r.jsx)($,{isEnabled:!0,value:n/c,position:n,duration:c,onChange:function(t){return e.seekSong(Math.round(t*c*1e3))}}),Object(r.jsx)(re,{})]})})),ae={position:"fixed",width:"100%",bottom:0,left:0,background:"rgb(40, 40, 40)",height:80,zIndex:2e3},oe=function(e){return Object(r.jsx)("div",{className:"footer",style:ae,children:Object(r.jsx)(ce,{})})};var se=Object(s.b)(null,(function(e){return Object(i.b)({setDeviceId:T,setActiveDevice:R,setStatus:I},e)}))((function(e){var t,n,a="Alltunes App";function o(e){return s.apply(this,arguments)}function s(){return(s=Object(w.a)(_.a.mark((function t(n){return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.setStatus(n),t.next=7;break;case 4:return u(),t.next=7,i();case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function i(){return new Promise((function(e){t=setInterval((function(){n&&n.getCurrentState().then((function(n){null!==n&&(clearInterval(t),e(n))}))}))}))}function u(){clearInterval(undefined)}function l(){return p.apply(this,arguments)}function p(){return(p=Object(w.a)(_.a.mark((function t(){var r;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=window.Spotify.Player,(n=new r({name:a,getOAuthToken:function(){var t=Object(w.a)(_.a.mark((function t(n){var r;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("undefined"===typeof e.access_token){t.next=5;break}return t.next=3,e.access_token;case 3:r=t.sent,n(r);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()})).on("initialization_error",(function(e){console.log(e)})),n.on("authentication_error",(function(e){console.log(e)})),n.on("account_error",(function(e){console.log(e)})),n.on("playback_error",(function(e){console.log(e)})),n.on("player_state_changed",function(){var e=Object(w.a)(_.a.mark((function e(t){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.on("ready",(function(t){e.setDeviceId(t.device_id),e.setActiveDevice(t.device_id)})),n.connect();case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(c.useEffect)((function(){(function(){var e=Object(w.a)(_.a.mark((function e(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){"Spotify"in window?e():window.onSpotifyWebPlaybackSDKReady=function(){e()}}));case 2:return e.next=4,l();case 4:return e.next=6,new Promise((function(e){n.on("ready",(function(t){e(t)}))}));case 6:return e.next=8,i();case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(r.jsx)(c.Fragment,{children:e.children})})),ie=n(233),ue=n(234),le=n(236),pe=n(232),de=n(239);function je(e){var t=Object(c.useState)(e.songuri),n=Object(x.a)(t,1)[0],a=Object(c.useState)(e.roomKey),o=Object(x.a)(a,2),s=o[0],i=o[1],u=Object(c.useState)(e.access_token),l=Object(x.a)(u,2),p=l[0],d=l[1];return Object(c.useState)((function(){d(e.access_token)}),[e.access_token,p]),Object(c.useState)((function(){i(e.roomKey)}),[e.roomKey,s]),Object(r.jsx)(de.a,{color:"secondary",variant:"contained",onClick:function(){!function(){var e={method:"post",url:"https://api.spotify.com/v1/me/player/queue/?uri=".concat(n),headers:{Authorization:"Bearer "+p}};N()(e).then((function(e){return e})).catch((function(e){throw e}))}()},children:"Queue"})}var be=n(235),fe=n(231),me=n(229),Oe=n(230),he=(n(151),Object(me.a)((function(e){return{root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:750},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}})));function ve(e){console.log(e.roomIp);var t=he(),n=Object(c.useState)(e.roomKey),a=Object(x.a)(n,2),o=a[0],s=a[1],i=Object(c.useState)(e.access_token),u=Object(x.a)(i,2),l=u[0],p=u[1],d=Object(c.useState)([]),j=Object(x.a)(d,2),b=j[0],f=j[1];return Object(c.useState)((function(){p(e.access_token)}),e.access_token),Object(c.useState)((function(){s(e.roomKey)}),e.roomKey),Object(c.useEffect)((function(){var t="ws://"+e.roomIp;new WebSocket(t).onmessage=function(e){try{var t=function(e){return e.reduce((function(e,t){var n={};return n.artists=t.artists.join(", "),n.name=t.name,n.uri=t.uri,n.trackCover=t.trackCover,e.push(n),e}),[])}(JSON.parse(e.data));f(t)}catch(n){console.log(n)}}}),[e.roomIp]),Object(r.jsx)(Oe.a,{children:Object(r.jsx)(fe.a,{className:t.paper,children:Object(r.jsx)(pe.a,{children:Object(r.jsx)(ie.a,{className:t.table,"aria-labelledby":"tableTitle","aria-label":"enhanced table",children:Object(r.jsx)(ue.a,{children:b.map((function(t,n){return Object(r.jsxs)(be.a,{tabIndex:-1,children:[Object(r.jsx)(le.a,{align:"left",padding:"none",children:Object(r.jsx)(G,{trackCover:t.trackCover,size:"75px"})}),Object(r.jsx)(le.a,{align:"left",children:t.artists}),Object(r.jsx)(le.a,{align:"left",children:t.name}),e.host?Object(r.jsx)(le.a,{padding:"checkbox",children:Object(r.jsx)("div",{style:{paddingRight:"10px"},children:Object(r.jsx)(je,{songuri:t.uri,roomKey:o,access_token:l})})}):Object(r.jsx)("div",{})]},t.name)}))})})})})})}n(182);function ye(e){var t=Object(c.useState)(!1),n=Object(x.a)(t,2),a=(n[0],n[1],Object(c.useState)(e.access_token)),o=Object(x.a)(a,2),s=o[0],i=o[1],u=Object(c.useState)(e.roomKey),l=Object(x.a)(u,2),p=l[0],d=l[1];return Object(c.useState)((function(){var t;i(e.access_token),t=e.access_token,E.defaults.headers.common.Authorization="Bearer "+t,localStorage.setItem("token",t)}),e.access_token),Object(c.useState)((function(){d(e.roomKey)}),e.roomKey),Object(r.jsxs)("div",{class:"main",children:[Object(r.jsx)(se,{access_token:s,children:Object(r.jsx)(oe,{})}),Object(r.jsx)("br",{}),Object(r.jsx)(ve,{roomIp:e.roomIp,host:!0,access_token:s,roomKey:p})]})}n(183);function xe(e){return console.log(e.roomIp),Object(r.jsx)("section",{children:Object(r.jsx)("div",{class:"main",children:Object(r.jsx)(ve,{roomIp:e.roomIp})})})}var ge=n(109),Se=n.n(ge),ke=(n(186),"http://34.77.48.74:3000");function _e(e){function t(e){var t;return t="".concat(ke,"host"===e?"/loading/":"/userloading/"),"https://accounts.spotify.com/authorize?"+Se.a.stringify({response_type:"token",client_id:"aeedb64c42db49bf8413aab94c44637c",scope:"streaming user-read-private user-read-email user-read-playback-state user-modify-playback-state user-library-modify user-top-read",redirect_uri:t})}return Object(r.jsxs)(Oe.a,{fixed:!0,children:[Object(r.jsx)("div",{id:"titleText",title:"titleText",className:"titleText",children:"AllTunes"}),Object(r.jsxs)("div",{className:"button_cont",children:[Object(r.jsx)("a",{type:"button",className:"buttoncss",href:t("host"),children:"Host a room"}),Object(r.jsx)("a",{type:"button",className:"buttoncss",href:t("joiner"),children:"Join a room"})]})]})}var we="http://35.187.88.243:8000/room";function Ce(e){return Ne.apply(this,arguments)}function Ne(){return(Ne=Object(w.a)(_.a.mark((function e(t){var n;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=function(){return new Promise((function(e,n){var r={timeout:"90000",method:"post",url:we,headers:{"Content-Type":"application/json"},data:JSON.stringify(t)};return N()(r).then((function(t){e(t.data)})).catch((function(e){console.log(e)}))}))},e.abrupt("return",n());case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ee(e,t){return Re.apply(this,arguments)}function Re(){return(Re=Object(w.a)(_.a.mark((function e(t,n){var r;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={method:"put",baseURL:"http://"+n+"/room",headers:{"Content-Type":"application/json"},data:JSON.stringify(t)},console.log(r),e.abrupt("return",N()(r).then((function(e){return e})).catch((function(e){console.log(e)})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Te(e){return Ie.apply(this,arguments)}function Ie(){return(Ie=Object(w.a)(_.a.mark((function e(t){var n;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=function(){return new Promise((function(e,n){var r={method:"get",url:we,headers:{"Content-Type":"application/json"},data:JSON.stringify(t)};return N()(r).then((function(t){e(t.data)})).catch((function(e){console.log(e)}))}))},e.abrupt("return",n());case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}n(187);function Ae(e){var t=Object(c.useState)(),n=Object(x.a)(t,2),a=n[0],o=n[1];return Object(c.useEffect)((function(){function t(){return(t=Object(w.a)(_.a.mark((function t(){var n,r;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n={token:e.access_token,username:"kevin"}).token||!n.username){t.next=7;break}return t.next=4,Ce(n);case 4:r=t.sent,o(r.roomKey),e.setRoomIp(r.roomIp);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[e.access_token]),a?Object(r.jsx)(S.a,{to:"/hostroom/#roomKey=".concat(a,"&access_token=").concat(e.access_token)}):Object(r.jsx)("div",{class:"loadingText",children:"The page is loading, you will be redirected shortly!"})}var Ke=n(238);n(189);function Ue(e){var t=Object(c.useState)(!1),n=Object(x.a)(t,2),a=n[0],o=n[1],s=Object(c.useState)(),i=Object(x.a)(s,2),u=i[0],l=i[1],p=Object(c.useState)(),d=Object(x.a)(p,2),j=d[0],b=d[1];function f(){return m.apply(this,arguments)}function m(){return(m=Object(w.a)(_.a.mark((function e(){var t;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Te();case 2:t=e.sent,console.log(t),b(t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(){return(O=Object(w.a)(_.a.mark((function t(){return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!j[u]){t.next=8;break}return t.next=4,Ee({token:e.access_token,username:"james"},j[u]);case 4:o(!0),e.setRoomIp(j[u]),t.next=9;break;case 8:f();case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.error(t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))).apply(this,arguments)}return Object(c.useEffect)((function(){f()}),j),a?Object(r.jsx)(S.a,{to:"/userroom/#roomKey=".concat(u,"&access_token=").concat(e.access_token)}):Object(r.jsxs)("form",{noValidate:!0,id:"form",children:[Object(r.jsx)(Ke.a,{onChange:function(e){l(e.target.value)},id:"standard-basic",label:"Room Key",color:"primary"}),Object(r.jsx)(de.a,{onClick:function(){!function(){O.apply(this,arguments)}()},variant:"contained",color:"primary",children:"Join Room"})]})}var De=n(237),Fe=n(110);function Pe(){var e=Object(c.useState)(),t=Object(x.a)(e,2),n=t[0],a=t[1],o=Object(c.useState)(),s=Object(x.a)(o,2),i=s[0],u=s[1],l=Object(c.useState)(),p=Object(x.a)(l,2),d=p[0],j=p[1];return Object(c.useEffect)((function(){var e=function(){var e,t={},n=/([^&;=]+)=?([^&;]*)/g,r=window.location.hash.substring(1);for(e=n.exec(r);e;)t[e[1]]=decodeURIComponent(e[2]),e=n.exec(r);return t}();u(e.roomKey),a(e.access_token)}),[i,n]),Object(r.jsx)(De.a,{theme:Object(Fe.a)({palette:{type:"dark",primary:{main:"#121212"},secondary:{main:"#1DB954",contrastText:"#FFFFFF"}}}),children:Object(r.jsx)(g.a,{children:Object(r.jsxs)(S.d,{children:[Object(r.jsx)(S.b,{path:"/hostroom",children:Object(r.jsx)(ye,{access_token:n,roomKey:i,roomIp:d})}),Object(r.jsx)(S.b,{path:"/loading",children:Object(r.jsx)(Ae,{access_token:n,roomKey:i,roomIp:d,setRoomIp:j})}),Object(r.jsx)(S.b,{path:"/UserLoading",children:Object(r.jsx)(Ue,{access_token:n,roomKey:i,roomIp:d,setRoomIp:j})}),Object(r.jsx)(S.b,{path:"/userroom",children:Object(r.jsx)(xe,{access_token:n,roomKey:i,roomIp:d})}),Object(r.jsx)(S.b,{path:"/",children:Object(r.jsx)(_e,{access_token:n,roomKey:i,roomIp:d})})]})})})}o.a.render(Object(r.jsx)(s.a,{store:y,children:Object(r.jsx)(Pe,{})}),document.getElementById("root"))}},[[190,1,2]]]);
//# sourceMappingURL=main.8a89a1d5.chunk.js.map