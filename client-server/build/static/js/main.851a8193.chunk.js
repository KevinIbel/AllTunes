(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{137:function(e,t,n){},138:function(e,t,n){},144:function(e,t,n){},149:function(e,t,n){},150:function(e,t,n){},153:function(e,t,n){},154:function(e,t,n){},156:function(e,t,n){},163:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n(0),c=n(12),o=n.n(c),s=n(28),i=n(21),u=n(91),l=n(8),d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_TOKEN":return Object(l.a)(Object(l.a)({},e),{},{token:t.token});case"SET_DEVICE_ID":return Object(l.a)(Object(l.a)({},e),{},{deviceId:t.id});default:return e}},p={user:{id:null,display_name:null,display_picture:null}},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_USER_SUCCESS":return Object(l.a)(Object(l.a)({},e),{},{user:t.user,fetchUserError:!1});case"FETCH_USER_ERROR":return Object(l.a)(Object(l.a)({},e),{},{fetchUserError:!0});default:return e}},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CONTAINS_CURRENT_SUCCESS":return Object(l.a)(Object(l.a)({},e),{},{containsCurrent:t.contains.data.includes(!0)});default:return e}},f={view:"browse",modal:!1},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_NEW_VIEW":return Object(l.a)(Object(l.a)({},e),{},{view:t.view});case"SET_MODAL":return Object(l.a)(Object(l.a)({},e),{},{modal:t.modal,mode:t.mode});default:return e}},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_STATUS_SUCCESS":return Object(l.a)(Object(l.a)({},e),{},{status:t.status});default:return e}},h=Object(i.c)({sessionReducer:d,userReducer:j,libraryReducer:b,uiReducer:O,playerReducer:m}),v=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||i.d,y=Object(i.e)(h,v(Object(i.a)(u.a))),x=n(7),g=n.n(x),k=n(15),S=n(10),_=n(55),w=n(16),C=n(26),N=n.n(C),E=N.a.create({baseURL:"https://api.spotify.com/v1",headers:{}}),R=function(e){return E.defaults.headers.common.Authorization="Bearer "+e,localStorage.setItem("token",e),{type:"SET_TOKEN",token:e}},I=function(e){return E.put("/me/player",{device_ids:[e],play:!1}),{type:"SET_DEVICE"}},T=function(e){return{type:"SET_DEVICE_ID",id:e}},A=function(e){return{type:"FETCH_STATUS_SUCCESS",status:e}},K=function(){return E.post("/me/player/next"),{type:"CHANGE_SONG"}},U=function(){return E.post("/me/player/previous"),{type:"CHANGE_SONG"}},D=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;return e&&t?E.put("/me/player/play",{context_uri:e,offset:{position:t}}):e?E.put("/me/player/play",{context_uri:e}):E.put("/me/player/play"),{type:"PLAY_STATE"}},F=function(e,t){return E.put("/me/player/play",{uris:e,offset:{position:t}}),{type:"PLAY_STATE"}},L=function(){return E.put("/me/player/pause"),{type:"PAUSE_STATE"}},P=function(e){return E.put("/me/player/seek?position_ms=".concat(e)),{type:"SEEK_SONG"}},z=(n(137),n(32)),H=n(37),V=n(36),W=function(e){return function(){var t=Object(k.a)(g.a.mark((function t(n){var r;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,E.get("/me/tracks/contains?ids=".concat(e));case 3:return r=t.sent,n({type:"CONTAINS_CURRENT_SUCCESS",contains:r}),t.abrupt("return",r.data);case 8:return t.prev=8,t.t0=t.catch(0),t.abrupt("return",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},J=n(92),B=function(e){var t=function(t){Object(H.a)(a,t);var n=Object(V.a)(a);function a(){var t;Object(z.a)(this,a);for(var c=arguments.length,o=new Array(c),s=0;s<c;s++)o[s]=arguments[s];return(t=n.call.apply(n,[this].concat(o))).render=function(){return Object(r.jsx)(e,Object(l.a)(Object(l.a)({},t.props),{},{playContext:function(e,n){return t.props.playSong(e,n)},playSong:function(){return t.props.playSong()}}))},t}return Object(J.a)(a,[{key:"shouldComponentUpdate",value:function(e){return e.playing||this.props.playing&&!e.playing}},{key:"componentDidUpdate",value:function(e){if(e.currentSong.id!==this.props.currentSong.id){var t=this.props.currentSong.id,n=this.props.currentSong.linked_from?this.props.currentSong.linked_from.id:null;this.props.containsCurrentSong(n?"".concat(t,",").concat(n):t)}}}]),a}(a.Component);return Object(s.b)((function(e){return{currentSong:e.playerReducer.status?e.playerReducer.status.track_window.current_track:{},contains:!!e.libraryReducer.containsCurrent,trackPosition:e.playerReducer.status?e.playerReducer.status.position:0,playing:!!e.playerReducer.status&&!e.playerReducer.status.paused}}),(function(e){return Object(i.b)({nextSong:K,previousSong:U,pauseSong:L,playSong:D,seekSong:P,containsCurrentSong:W},e)}))(t)},G=(n(138),B((function(e){var t;return t=e.trackCover?e.trackCover:e.currentSong.album?e.currentSong.album.images[2].url:"",e.currentSong.album||e.trackCover?Object(r.jsx)("div",{className:"cover",style:{float:"left",paddingRight:"10px"},children:Object(r.jsx)("img",{class:"cover",alt:"cover",style:{width:e.size,height:e.size,padding:e.trackCover?"5px":""},src:t})}):null})));var M=function(e){var t=function(t){Object(H.a)(a,t);var n=Object(V.a)(a);function a(){var t;Object(z.a)(this,a);for(var c=arguments.length,o=new Array(c),s=0;s<c;s++)o[s]=arguments[s];return(t=n.call.apply(n,[this].concat(o))).render=function(){return Object(r.jsx)(e,Object(l.a)({},t.props))},t}return a}(a.Component);return Object(s.b)(null)(t)}(function(e){var t=function(t){Object(H.a)(a,t);var n=Object(V.a)(a);function a(){var t;Object(z.a)(this,a);for(var c=arguments.length,o=new Array(c),s=0;s<c;s++)o[s]=arguments[s];return(t=n.call.apply(n,[this].concat(o))).render=function(){return Object(r.jsx)(e,Object(l.a)({},t.props))},t}return a}(a.Component);return Object(s.b)((function(e){return{currentUri:e.playerReducer.status?e.playerReducer.status.context.uri:null,currentSong:e.playerReducer.status?e.playerReducer.status.track_window.current_track.linked_from.id||e.playerReducer.status.track_window.current_track.id:null,playing:!!e.playerReducer.status&&!e.playerReducer.status.paused}}),(function(e){return Object(i.b)({pauseSong:L,playSong:D,playTracks:F,containsCurrentSong:W},e)}))(t)}((function(e){var t=e.artists.length;return Object(r.jsxs)("div",{className:"details-section",children:[Object(r.jsx)(G,{size:"56px"}),Object(r.jsx)("div",{className:"details-section-song-name",children:Object(r.jsx)("p",{children:e.songName})}),Object(r.jsx)("div",{className:"details-section-artist-name",children:e.artists.map((function(e,n){return Object(r.jsxs)("span",{children:[Object(r.jsx)("span",{className:"artist",children:e.name},n),n+1!==t?", ":""]},n)}))})]})}))),X=function(e){return Object(r.jsx)("div",{className:"control-btn "+e.className,onClick:e.onClick,children:Object(r.jsx)("i",{className:"fa "+e.icon})})};var Y=function(e){return Object(r.jsxs)("div",{className:"song-control",children:[Object(r.jsx)(X,{onClick:function(){return e.shuffle(!e.shuffleActive)},className:"shuffle-song"+(e.shuffleActive?" active":""),icon:"fa-random"}),Object(r.jsx)(X,{className:"back-song",icon:"fa-step-backward reverse",onClick:e.previousSong}),Object(r.jsx)(X,{className:"play-btn",onClick:e.playing?e.pauseSong:e.playSong,icon:"play-btn "+(e.playing?"fa-pause-circle-o":"fa-play-circle-o"),playBtn:!0}),Object(r.jsx)(X,{className:"next-song",icon:"fa-step-forward forward",onClick:e.nextSong}),Object(r.jsx)(X,{onClick:function(){return e.repeatContext(e.repeatActive?"off":"context")},className:"repeat-song"+(e.repeatActive?" active":""),icon:"fa-retweet"})]})},Z=n(63),q=n(40),Q=function(e){var t=e.value,n=e.style,a=e.className;return Object(r.jsx)("div",{className:a,style:Object.assign({},{position:"absolute",borderRadius:4},{top:0,bottom:0,left:0,width:"".concat(100*t,"%")},n)})},$=function(e){var t=e.value,n=e.style,a=e.className;return Object(r.jsx)("div",{className:a,style:Object.assign({},{position:"absolute",width:10,height:10,borderRadius:"100%",transform:"scale(1)",transition:"transform 0.2s","&:hover":{transform:"scale(1.3)"}},{top:0,left:"".concat(100*t,"%"),marginTop:-3,marginLeft:-8},n)})},ee=function(e){var t=e.isEnabled,n=e.direction,a=void 0===n?q.Direction.HORIZONTAL:n,c=e.value,o=Object(Z.a)(e,["isEnabled","direction","value"]);return Object(r.jsxs)("div",{className:"song-sider-container",children:[Object(r.jsx)(q.FormattedTime,{numSeconds:o.position}),Object(r.jsxs)(q.Slider,Object(l.a)(Object(l.a)({isEnabled:t,direction:a,className:"song-sider",style:{cursor:"pointer"}},o),{},{children:[Object(r.jsx)(Q,{className:"position-sider",direction:a,value:c}),Object(r.jsx)($,{className:"handler-sider",direction:a,value:c})]})),Object(r.jsx)(q.FormattedTime,{numSeconds:o.duration||0})]})},te=function(e){var t=e.value,n=e.style,a=e.className;return Object(r.jsx)("div",{className:a,style:Object.assign({},{position:"absolute",borderRadius:4},{top:0,bottom:0,left:0,width:"".concat(100*t,"%")},n)})},ne=function(e){var t=e.value,n=e.style,a=e.className;return Object(r.jsx)("div",{className:a,style:Object.assign({},{position:"absolute",width:10,height:10,borderRadius:"100%",transform:"scale(1)",transition:"transform 0.2s","&:hover":{transform:"scale(1.3)"}},{top:0,left:"".concat(100*t,"%"),marginTop:-3,marginLeft:-8},n)})},re=function(e){var t=e.isEnabled,n=e.direction,a=void 0===n?q.Direction.HORIZONTAL:n,c=e.value,o=Object(Z.a)(e,["isEnabled","direction","value"]),s=c>.5?"fa-volume-up":0===c?"fa-volume-off":"fa-volume-down";return Object(r.jsxs)("div",{className:"volume-sider-container",children:[Object(r.jsx)("i",{onClick:o.onClick,className:"volumen fa "+s,"aria-hidden":"true"}),Object(r.jsxs)(q.Slider,Object(l.a)(Object(l.a)({isEnabled:t,direction:a,className:"volume-sider",style:{cursor:"pointer"}},o),{},{children:[Object(r.jsx)(te,{className:"position-sider",direction:a,value:c}),Object(r.jsx)(ne,{className:"handler-sider",direction:a,value:c})]}))]})},ae=function(e){Object(H.a)(n,e);var t=Object(V.a)(n);function n(){var e;Object(z.a)(this,n);for(var a=arguments.length,c=new Array(a),o=0;o<a;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).state={volume:1,previous:1,clicked:!1},e.changeVolume=function(e){E.put("/me/player/volume?volume_percent=".concat(Math.round(100*e)))},e.onOff=function(){e.setState((function(e){return{volume:0,previous:e.volume,clicked:!0}})),e.changeVolume(0)},e.onOn=function(){e.setState((function(e){return{volume:e.previous,clicked:!1}})),e.changeVolume(e.state.previous)},e.onClick=function(){e.state.clicked?0===e.state.volume?e.onOn():e.setState({clicked:!1}):e.onOff()},e.render=function(){return Object(r.jsx)("div",{className:"volume-control-container",children:Object(r.jsx)(re,{value:e.state.volume,onClick:e.onClick,onChange:function(t){e.setState({volume:t})},onChangeEnd:function(t){e.setState({volume:t}),e.changeVolume(t)}})})},e}return n}(a.Component);var ce=B((function(e){function t(e){return e/1e3}var n=t(e.trackPosition)||0,a=e.currentSong?t(e.currentSong.duration_ms):1;return Object(r.jsxs)("div",{className:"player-container",children:[e.currentSong.id?Object(r.jsx)(M,{ids:e.currentSong.linked_from.id?"".concat(e.currentSong.linked_from.id,",").concat(e.currentSong.id):e.currentSong.id,contains:e.contains,songName:e.currentSong.name||"",album:e.currentSong.album.uri.split(":")[2],artists:e.currentSong.artists||[]}):null,Object(r.jsx)(Y,Object(l.a)({},e)),Object(r.jsx)(ee,{isEnabled:!0,value:n/a,position:n,duration:a,onChange:function(t){return e.seekSong(Math.round(t*a*1e3))}}),Object(r.jsx)(ae,{})]})})),oe={position:"fixed",width:"100%",bottom:0,left:0,background:"rgb(40, 40, 40)",height:80,zIndex:2e3},se=function(e){return Object(r.jsx)("div",{className:"footer",style:oe,children:Object(r.jsx)(ce,{})})},ie=(n(144),function(e){return Object(r.jsx)("div",{className:"details-container",children:Object(r.jsxs)("p",{className:"user-name",children:["Currently Logged in as: ",e.display_name,e.img]})})}),ue=n(39),le=n(199),de=n(203),pe=n(204),je=n(215),be=n(67),fe=n.n(be),Oe=n(201),me=n(214),he={color:"rgb(30 215 96)"},ve=(Object(le.a)((function(e){return{root:{width:"100%",maxWidth:360,backgroundColor:e.palette.background.paper}}})),{height:"100%",top:"0px",right:"0vw",position:"fixed",overflowWrap:"break-word",display:"inline-block",color:"rgb(30 215 96)",padding:"15px",textAlign:"center",background:"rgb(40, 40, 40)",textDecoration:"none"}),ye={textAlign:"center",fontWeight:"bold",fontSize:18,marginTop:0,width:200},xe={display:"flex",alignItems:"center",flexWrap:"wrap"};function ge(e){var t="ws://"+e.roomIp,n=new WebSocket(t),c=Object(a.useState)([]),o=Object(S.a)(c,2),s=o[0],i=o[1];return Object(a.useEffect)((function(){n.onmessage=function(e){try{var t=JSON.parse(e.data);"userlist"==t.type&&(console.log("message.data:"+t.data),console.log("message.data keys:"+Object.keys(t.data)),console.log("message.data values:"+Object.values(t.data)),i((n=Object.keys(t.data),a=Object.values(t.data),Object(r.jsx)(Oe.a,{children:Object(r.jsxs)(de.a,{component:"nav",style:ve,"aria-label":"contacts",children:[Object(r.jsx)("h3",{style:he,children:" Room Lobby"}),n.map((function(e){var t;return Object(r.jsx)(pe.a,{children:n[0]==e?Object(r.jsx)("div",{children:Object(r.jsxs)(me.a,{alignItems:"center",display:"flex",children:[Object(r.jsx)(fe.a,{style:xe}),Object(r.jsx)("a",{style:{thin:xe,textDecoration:"none",color:"rgb(30 215 96)"},button:"true",target:"_blank",href:"https://open.spotify.com/user/"+e,children:Object(r.jsx)(je.a,{primary:a[n.indexOf(e)],children:" "})}),Object(r.jsx)(fe.a,{style:xe})]})}):Object(r.jsx)("div",{style:ye,children:Object(r.jsx)("a",(t={style:ye},Object(ue.a)(t,"style",{textDecoration:"none",color:"rgb(30 215 96)"}),Object(ue.a)(t,"button","true"),Object(ue.a)(t,"target","_blank"),Object(ue.a)(t,"href","https://open.spotify.com/user/"+e),Object(ue.a)(t,"children",Object(r.jsx)(je.a,{primary:a[n.indexOf(e)]})),t))})})}))]})}))))}catch(c){console.log(c)}var n,a}}),[]),Object(r.jsx)("div",{children:s})}var ke=Object(s.b)(null,(function(e){return Object(i.b)({setDeviceId:T,setActiveDevice:I,setStatus:A},e)}))((function(e){var t,n,c="Alltunes App";function o(e){return s.apply(this,arguments)}function s(){return(s=Object(k.a)(g.a.mark((function t(n){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.setStatus(n),t.next=7;break;case 4:return u(),t.next=7,i();case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function i(){return new Promise((function(e){t=setInterval((function(){n&&n.getCurrentState().then((function(n){null!==n&&(clearInterval(t),e(n))}))}))}))}function u(){clearInterval(undefined)}function l(){return d.apply(this,arguments)}function d(){return(d=Object(k.a)(g.a.mark((function t(){var r;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=window.Spotify.Player,(n=new r({name:c,getOAuthToken:function(){var t=Object(k.a)(g.a.mark((function t(n){var r;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("undefined"===typeof e.access_token){t.next=5;break}return t.next=3,e.access_token;case 3:r=t.sent,n(r);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()})).on("initialization_error",(function(e){console.log(e)})),n.on("authentication_error",(function(e){console.log(e)})),n.on("account_error",(function(e){console.log(e)})),n.on("playback_error",(function(e){console.log(e)})),n.on("player_state_changed",function(){var e=Object(k.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.on("ready",(function(t){e.setDeviceId(t.device_id),e.setActiveDevice(t.device_id)})),n.connect();case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(a.useEffect)((function(){(function(){var e=Object(k.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){"Spotify"in window?e():window.onSpotifyWebPlaybackSDKReady=function(){e()}}));case 2:return e.next=4,l();case 4:return e.next=6,new Promise((function(e){n.on("ready",(function(t){e(t)}))}));case 6:return e.next=8,i();case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(r.jsx)(a.Fragment,{children:e.children})})),Se=n(208),_e=n(209),we=n(211),Ce=n(207),Ne=n(205);function Ee(e){var t=Object(a.useState)(e.songuri),n=Object(S.a)(t,1)[0],c=Object(a.useState)(e.roomKey),o=Object(S.a)(c,2),s=o[0],i=o[1],u=Object(a.useState)(e.access_token),l=Object(S.a)(u,2),d=l[0],p=l[1];return Object(a.useState)((function(){p(e.access_token)}),[e.access_token,d]),Object(a.useState)((function(){i(e.roomKey)}),[e.roomKey,s]),Object(r.jsx)(Ne.a,{color:"secondary",variant:"contained",onClick:function(){!function(){var e={method:"post",url:"https://api.spotify.com/v1/me/player/queue/?uri=".concat(n),headers:{Authorization:"Bearer "+d}};N()(e).then((function(e){return e})).catch((function(e){throw e}))}()},children:"Queue"})}var Re=n(210),Ie=n(206),Te=Object(le.a)((function(e){return{root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:750},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}}));function Ae(e){console.log(e.roomIp);var t=Te(),n=Object(a.useState)(e.roomKey),c=Object(S.a)(n,2),o=c[0],s=c[1],i=Object(a.useState)(e.access_token),u=Object(S.a)(i,2),l=u[0],d=u[1],p=Object(a.useState)([]),j=Object(S.a)(p,2),b=j[0],f=j[1];return Object(a.useState)((function(){d(e.access_token)}),e.access_token),Object(a.useState)((function(){s(e.roomKey)}),e.roomKey),Object(a.useEffect)((function(){var t="ws://"+e.roomIp;new WebSocket(t).onmessage=function(e){try{var t=JSON.parse(e.data);"tracks"==t.type&&f(function(e){return e.length=100,e.reduce((function(e,t){var n={};return n.artists=t.artists.join(", "),n.name=t.name,n.uri=t.uri,n.trackCover=t.trackCover,e.push(n),e}),[])}(t.data))}catch(n){console.log(n)}}}),[e.roomIp]),Object(r.jsx)(Oe.a,{children:Object(r.jsx)(Ie.a,{className:t.paper,children:Object(r.jsx)(Ce.a,{children:Object(r.jsx)(Se.a,{className:t.table,"aria-labelledby":"tableTitle","aria-label":"enhanced table",children:Object(r.jsx)(_e.a,{children:b.map((function(t,n){return Object(r.jsxs)(Re.a,{tabIndex:-1,children:[Object(r.jsx)(we.a,{align:"left",padding:"none",children:Object(r.jsx)(G,{trackCover:t.trackCover,size:"75px"})}),Object(r.jsx)(we.a,{align:"left",children:t.artists}),Object(r.jsx)(we.a,{align:"left",children:t.name}),e.host?Object(r.jsx)(we.a,{padding:"checkbox",children:Object(r.jsx)("div",{style:{paddingRight:"10px"},children:Object(r.jsx)(Ee,{songuri:t.uri,roomKey:o,access_token:l})})}):Object(r.jsx)("div",{})]},t.name)}))})})})})})}n(149);function Ke(e){var t=Object(a.useState)(!1),n=Object(S.a)(t,2),c=(n[0],n[1],Object(a.useState)(e.access_token)),o=Object(S.a)(c,2),s=o[0],i=o[1],u=Object(a.useState)(e.roomKey),l=Object(S.a)(u,2),d=l[0],p=l[1];return Object(a.useState)((function(){i(e.access_token),R(e.access_token)}),e.access_token),Object(a.useState)((function(){p(e.roomKey)}),e.roomKey),Object(r.jsxs)("div",{class:"main",children:[Object(r.jsx)(ke,{access_token:s,children:Object(r.jsx)(se,{})}),Object(r.jsx)(ie,{host:!0,access_token:s,display_name:e.display_name,roomKey:d}),Object(r.jsx)("br",{}),Object(r.jsx)(Ae,{roomIp:e.roomIp,host:!0,access_token:s,roomKey:d}),Object(r.jsx)(ge,{host:!0})]})}n(150);function Ue(e){var t=Object(a.useState)(!1),n=Object(S.a)(t,2),c=(n[0],n[1],Object(a.useState)(e.access_token)),o=Object(S.a)(c,2),s=o[0],i=o[1],u=Object(a.useState)(e.roomKey),l=Object(S.a)(u,2),d=(l[0],l[1]);return Object(a.useState)((function(){i(e.access_token),R(e.access_token)}),e.access_token),Object(a.useState)((function(){d(e.roomKey)}),e.roomKey),Object(r.jsxs)("div",{class:"main",children:[Object(r.jsx)(ke,{access_token:s}),Object(r.jsx)(ie,{host:!0,display_name:e.display_name}),Object(r.jsx)("br",{}),Object(r.jsx)(Ae,{roomIp:e.roomIp}),Object(r.jsx)(ge,{host:!0})]})}var De=n(96),Fe=n.n(De),Le=(n(153),"http://34.77.48.74:3000");function Pe(e){function t(e){var t;return t="".concat(Le,"host"===e?"/loading/":"/userloading/"),"https://accounts.spotify.com/authorize?"+Fe.a.stringify({response_type:"token",client_id:"aeedb64c42db49bf8413aab94c44637c",scope:"streaming user-read-private user-read-email user-read-playback-state user-modify-playback-state user-library-modify user-top-read user-follow-modify",redirect_uri:t})}return Object(r.jsxs)(Oe.a,{fixed:!0,children:[Object(r.jsx)("div",{id:"titleText",title:"titleText",className:"titleText",children:"AllTunes"}),Object(r.jsxs)("div",{className:"button_cont",children:[Object(r.jsx)("a",{type:"button",className:"buttoncss",href:t("host"),children:"Host a room"}),Object(r.jsx)("a",{type:"button",className:"buttoncss",href:t("joiner"),children:"Join a room"})]})]})}var ze="http://35.187.88.243:8000/room";function He(e){return Ve.apply(this,arguments)}function Ve(){return(Ve=Object(k.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=function(){return new Promise((function(e,n){var r={timeout:"90000",method:"post",url:ze,headers:{"Content-Type":"application/json"},data:JSON.stringify(t)};return N()(r).then((function(t){e(t.data)})).catch((function(e){console.log(e)}))}))},e.abrupt("return",n());case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function We(e,t){return Je.apply(this,arguments)}function Je(){return(Je=Object(k.a)(g.a.mark((function e(t,n){var r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={method:"put",baseURL:"http://"+n+"/room",headers:{"Content-Type":"application/json"},data:JSON.stringify(t)},console.log(r),e.abrupt("return",N()(r).then((function(e){return e})).catch((function(e){console.log(e)})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Be(e){return Ge.apply(this,arguments)}function Ge(){return(Ge=Object(k.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=function(){return new Promise((function(e,n){var r={method:"get",url:ze,headers:{"Content-Type":"application/json"},data:JSON.stringify(t)};return N()(r).then((function(t){e(t.data)})).catch((function(e){console.log(e)}))}))},e.abrupt("return",n());case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}n(154);function Me(e){var t=Object(a.useState)(),n=Object(S.a)(t,2),c=n[0],o=n[1];return Object(a.useEffect)((function(){e.access_token&&e.display_name&&e.id&&function(){var t=Object(k.a)(g.a.mark((function t(){var n,r;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n={token:e.access_token,username:e.display_name,hostid:e.id}).token||!n.username){t.next=8;break}return t.next=4,He(n);case 4:r=t.sent,o(r.roomKey),e.setRoomIp(r.roomIp);case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()()}),[e.access_token,e.display_name,e.id]),c?Object(r.jsx)(w.a,{to:"/hostroom/#roomKey=".concat(c,"&access_token=").concat(e.access_token)}):Object(r.jsx)("div",{class:"loadingText",children:"The page is loading, you will be redirected shortly!"})}var Xe=n(213);n(156);function Ye(e){var t=Object(a.useState)(!1),n=Object(S.a)(t,2),c=n[0],o=n[1],s=Object(a.useState)(),i=Object(S.a)(s,2),u=i[0],l=i[1],d=Object(a.useState)(),p=Object(S.a)(d,2),j=p[0],b=p[1];function f(){return O.apply(this,arguments)}function O(){return(O=Object(k.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=6;break;case 6:return e.t0=b,e.next=9,Be();case 9:e.t1=e.sent,(0,e.t0)(e.t1);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(){return(m=Object(k.a)(g.a.mark((function t(){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!j[u]){t.next=8;break}return t.next=4,We({token:e.access_token,username:e.display_name,userid:e.id},j[u]);case 4:o(!0),e.setRoomIp(j[u]),t.next=9;break;case 8:f();case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.error(t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))).apply(this,arguments)}return Object(a.useEffect)((function(){f()}),j),c?Object(r.jsx)(w.a,{to:"/userroom/#roomKey=".concat(u,"&access_token=").concat(e.access_token)}):Object(r.jsxs)("form",{noValidate:!0,id:"form",children:[Object(r.jsx)(Xe.a,{onChange:function(e){l(e.target.value)},id:"standard-basic",label:"Room Key",color:"primary"}),Object(r.jsx)(Ne.a,{onClick:function(){!function(){m.apply(this,arguments)}()},variant:"contained",color:"primary",children:"Join Room"})]})}var Ze=n(212),qe=n(97);n(157);function Qe(){var e=Object(a.useState)(),t=Object(S.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)(),s=Object(S.a)(o,2),i=s[0],u=s[1],l=Object(a.useState)(),d=Object(S.a)(l,2),p=d[0],j=d[1],b=Object(a.useState)(),f=Object(S.a)(b,2),O=f[0],m=f[1],h=Object(a.useState)(),v=Object(S.a)(h,2),y=v[0],x=v[1],C=Object(a.useState)(),E=Object(S.a)(C,2),R=E[0],I=E[1];return Object(a.useEffect)((function(){var e=function(){var e,t={},n=/([^&;=]+)=?([^&;]*)/g,r=window.location.hash.substring(1);for(e=n.exec(r);e;)t[e[1]]=decodeURIComponent(e[2]),e=n.exec(r);return t}();u(e.roomKey),c(e.access_token)}),[i,n]),Object(a.useEffect)((function(){n&&function(){var e=Object(k.a)(g.a.mark((function e(){var t,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={method:"get",url:"https://api.spotify.com/v1/me",headers:{Authorization:"Bearer "+n}},e.next=3,N()(t).then((function(e){return[e.data.display_name,e.data.id]})).catch((function(e){throw e}));case 3:r=e.sent,console.log(r),m(r[0]),x(r[1]);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[n]),Object(a.useEffect)((function(){n&&function(){var e=Object(k.a)(g.a.mark((function e(){var t,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={method:"put",url:"https://api.spotify.com/v1/me/following",headers:{Authorization:"Bearer "+n}},e.next=3,N()(t).then((function(e){return e.data.followId})).catch((function(e){throw e}));case 3:r=e.sent,console.log(r),I(r);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[n]),Object(r.jsx)(Ze.a,{theme:Object(qe.a)({palette:{type:"dark",primary:{main:"#121212"},secondary:{main:"#1DB954",contrastText:"#FFFFFF"}}}),children:Object(r.jsx)(_.a,{children:Object(r.jsxs)(w.d,{children:[Object(r.jsx)(w.b,{path:"/hostroom",children:Object(r.jsx)(Ke,{access_token:n,roomKey:i,display_name:O,roomIp:p,setRoomIp:j,id:y,followId:R})}),Object(r.jsx)(w.b,{path:"/loading",children:Object(r.jsx)(Me,{access_token:n,roomKey:i,display_name:O,roomIp:p,setRoomIp:j,id:y,followId:R})}),Object(r.jsx)(w.b,{path:"/UserLoading",children:Object(r.jsx)(Ye,{access_token:n,roomKey:i,display_name:O,roomIp:p,setRoomIp:j,id:y,followId:R})}),Object(r.jsx)(w.b,{path:"/userroom",children:Object(r.jsx)(Ue,{access_token:n,roomKey:i,display_name:O,roomIp:p,setRoomIp:j,id:y,followId:R})}),Object(r.jsx)(w.b,{path:"/",children:Object(r.jsx)(Pe,{access_token:n,roomKey:i,roomIp:p})})]})})})}o.a.render(Object(r.jsx)(s.a,{store:y,children:Object(r.jsx)(Qe,{})}),document.getElementById("root"))}},[[163,1,2]]]);
//# sourceMappingURL=main.851a8193.chunk.js.map