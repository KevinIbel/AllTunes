(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{144:function(e,t,n){},145:function(e,t,n){},182:function(e,t,n){},183:function(e,t,n){},186:function(e,t,n){},187:function(e,t,n){},189:function(e,t,n){},190:function(e,t,n){"use strict";n.r(t);var r=n(2),c=n(0),a=n.n(c),o=n(11),s=n.n(o),i=n(25),u=n(19),l=n(105),p=n(7),d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_TOKEN":return Object(p.a)(Object(p.a)({},e),{},{token:t.token});case"SET_DEVICE_ID":return Object(p.a)(Object(p.a)({},e),{},{deviceId:t.id});default:return e}},j={user:{id:null,display_name:null,display_picture:null}},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_USER_SUCCESS":return Object(p.a)(Object(p.a)({},e),{},{user:t.user,fetchUserError:!1});case"FETCH_USER_ERROR":return Object(p.a)(Object(p.a)({},e),{},{fetchUserError:!0});default:return e}},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CONTAINS_CURRENT_SUCCESS":return Object(p.a)(Object(p.a)({},e),{},{containsCurrent:t.contains.data.includes(!0)});default:return e}},O={view:"browse",modal:!1},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_NEW_VIEW":return Object(p.a)(Object(p.a)({},e),{},{view:t.view});case"SET_MODAL":return Object(p.a)(Object(p.a)({},e),{},{modal:t.modal,mode:t.mode});default:return e}},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_STATUS_SUCCESS":return Object(p.a)(Object(p.a)({},e),{},{status:t.status});default:return e}},v=Object(u.c)({sessionReducer:d,userReducer:b,libraryReducer:f,uiReducer:m,playerReducer:h}),y=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||u.d,x=Object(u.e)(v,y(Object(u.a)(l.a))),g=n(14),S=n(57),k=n(15),_=n(8),w=n.n(_),C=n(17),N=n(35),E=n.n(N),T=E.a.create({baseURL:"https://api.spotify.com/v1",headers:{}}),R=function(e){return T.put("/me/player",{device_ids:[e],play:!1}),{type:"SET_DEVICE"}},I=function(e){return{type:"SET_DEVICE_ID",id:e}},A=function(e){return{type:"FETCH_STATUS_SUCCESS",status:e}},K=function(){return T.post("/me/player/next"),{type:"CHANGE_SONG"}},U=function(){return T.post("/me/player/previous"),{type:"CHANGE_SONG"}},D=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;return e&&t?T.put("/me/player/play",{context_uri:e,offset:{position:t}}):e?T.put("/me/player/play",{context_uri:e}):T.put("/me/player/play"),{type:"PLAY_STATE"}},F=function(e,t){return T.put("/me/player/play",{uris:e,offset:{position:t}}),{type:"PLAY_STATE"}},P=function(){return T.put("/me/player/pause"),{type:"PAUSE_STATE"}},L=function(e){return T.put("/me/player/seek?position_ms=".concat(e)),{type:"SEEK_SONG"}},H=(n(144),n(24)),V=n(27),z=n(26),J=function(e){return function(){var t=Object(C.a)(w.a.mark((function t(n){var r;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,T.get("/me/tracks/contains?ids=".concat(e));case 3:return r=t.sent,n({type:"CONTAINS_CURRENT_SUCCESS",contains:r}),t.abrupt("return",r.data);case 8:return t.prev=8,t.t0=t.catch(0),t.abrupt("return",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},B=n(58),G=function(e){var t=function(t){Object(V.a)(c,t);var n=Object(z.a)(c);function c(){var t;Object(H.a)(this,c);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return(t=n.call.apply(n,[this].concat(o))).render=function(){return Object(r.jsx)(e,Object(p.a)(Object(p.a)({},t.props),{},{playContext:function(e,n){return t.props.playSong(e,n)},playSong:function(){return t.props.playSong()}}))},t}return Object(B.a)(c,[{key:"shouldComponentUpdate",value:function(e){return e.playing||this.props.playing&&!e.playing}},{key:"componentDidUpdate",value:function(e){if(e.currentSong.id!==this.props.currentSong.id){var t=this.props.currentSong.id,n=this.props.currentSong.linked_from?this.props.currentSong.linked_from.id:null;this.props.containsCurrentSong(n?"".concat(t,",").concat(n):t)}}}]),c}(c.Component);return Object(i.b)((function(e){return{currentSong:e.playerReducer.status?e.playerReducer.status.track_window.current_track:{},contains:!!e.libraryReducer.containsCurrent,trackPosition:e.playerReducer.status?e.playerReducer.status.position:0,playing:!!e.playerReducer.status&&!e.playerReducer.status.paused}}),(function(e){return Object(u.b)({nextSong:K,previousSong:U,pauseSong:P,playSong:D,seekSong:L,containsCurrentSong:J},e)}))(t)},W=(n(145),G((function(e){var t;return t=e.trackCover?e.trackCover:e.currentSong.album?e.currentSong.album.images[2].url:"",e.currentSong.album||e.trackCover?Object(r.jsx)("div",{className:"cover",style:{float:"left",paddingRight:"10px"},children:Object(r.jsx)("img",{class:"cover",alt:"cover",style:{width:e.size,height:e.size,padding:e.trackCover?"5px":""},src:t})}):null})));var M=function(e){var t=function(t){Object(V.a)(c,t);var n=Object(z.a)(c);function c(){var t;Object(H.a)(this,c);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return(t=n.call.apply(n,[this].concat(o))).render=function(){return Object(r.jsx)(e,Object(p.a)({},t.props))},t}return c}(c.Component);return Object(i.b)(null)(t)}(function(e){var t=function(t){Object(V.a)(c,t);var n=Object(z.a)(c);function c(){var t;Object(H.a)(this,c);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return(t=n.call.apply(n,[this].concat(o))).render=function(){return Object(r.jsx)(e,Object(p.a)({},t.props))},t}return c}(c.Component);return Object(i.b)((function(e){return{currentUri:e.playerReducer.status?e.playerReducer.status.context.uri:null,currentSong:e.playerReducer.status?e.playerReducer.status.track_window.current_track.linked_from.id||e.playerReducer.status.track_window.current_track.id:null,playing:!!e.playerReducer.status&&!e.playerReducer.status.paused}}),(function(e){return Object(u.b)({pauseSong:P,playSong:D,playTracks:F,containsCurrentSong:J},e)}))(t)}((function(e){var t=e.artists.length;return Object(r.jsxs)("div",{className:"details-section",children:[Object(r.jsx)(W,{size:"56px"}),Object(r.jsx)("div",{className:"details-section-song-name",children:Object(r.jsx)("p",{children:e.songName})}),Object(r.jsx)("div",{className:"details-section-artist-name",children:e.artists.map((function(n,c){return Object(r.jsxs)("span",{children:[Object(r.jsx)("span",{className:"artist",onClick:function(){return e.onArtistClick(n.uri.split(":")[2])},children:n.name},c),c+1!==t?", ":""]},c)}))})]})}))),X=function(e){return Object(r.jsx)("div",{className:"control-btn "+e.className,onClick:e.onClick,children:Object(r.jsx)("i",{className:"fa "+e.icon})})};var Y=function(e){return Object(r.jsxs)("div",{className:"song-control",children:[Object(r.jsx)(X,{onClick:function(){return e.shuffle(!e.shuffleActive)},className:"shuffle-song"+(e.shuffleActive?" active":""),icon:"fa-random"}),Object(r.jsx)(X,{className:"back-song",icon:"fa-step-backward reverse",onClick:e.previousSong}),Object(r.jsx)(X,{className:"play-btn",onClick:e.playing?e.pauseSong:e.playSong,icon:"play-btn "+(e.playing?"fa-pause-circle-o":"fa-play-circle-o"),playBtn:!0}),Object(r.jsx)(X,{className:"next-song",icon:"fa-step-forward forward",onClick:e.nextSong}),Object(r.jsx)(X,{onClick:function(){return e.repeatContext(e.repeatActive?"off":"context")},className:"repeat-song"+(e.repeatActive?" active":""),icon:"fa-retweet"})]})},Z=n(64),q=n(37),Q=function(e){var t=e.value,n=e.style,c=e.className;return Object(r.jsx)("div",{className:c,style:Object.assign({},{position:"absolute",borderRadius:4},{top:0,bottom:0,left:0,width:"".concat(100*t,"%")},n)})},$=function(e){var t=e.value,n=e.style,c=e.className;return Object(r.jsx)("div",{className:c,style:Object.assign({},{position:"absolute",width:10,height:10,borderRadius:"100%",transform:"scale(1)",transition:"transform 0.2s","&:hover":{transform:"scale(1.3)"}},{top:0,left:"".concat(100*t,"%"),marginTop:-3,marginLeft:-8},n)})},ee=function(e){var t=e.isEnabled,n=e.direction,c=void 0===n?q.Direction.HORIZONTAL:n,a=e.value,o=Object(Z.a)(e,["isEnabled","direction","value"]);return Object(r.jsxs)("div",{className:"song-sider-container",children:[Object(r.jsx)(q.FormattedTime,{numSeconds:o.position}),Object(r.jsxs)(q.Slider,Object(p.a)(Object(p.a)({isEnabled:t,direction:c,className:"song-sider",style:{cursor:"pointer"}},o),{},{children:[Object(r.jsx)(Q,{className:"position-sider",direction:c,value:a}),Object(r.jsx)($,{className:"handler-sider",direction:c,value:a})]})),Object(r.jsx)(q.FormattedTime,{numSeconds:o.duration||0})]})},te=function(e){var t=e.value,n=e.style,c=e.className;return Object(r.jsx)("div",{className:c,style:Object.assign({},{position:"absolute",borderRadius:4},{top:0,bottom:0,left:0,width:"".concat(100*t,"%")},n)})},ne=function(e){var t=e.value,n=e.style,c=e.className;return Object(r.jsx)("div",{className:c,style:Object.assign({},{position:"absolute",width:10,height:10,borderRadius:"100%",transform:"scale(1)",transition:"transform 0.2s","&:hover":{transform:"scale(1.3)"}},{top:0,left:"".concat(100*t,"%"),marginTop:-3,marginLeft:-8},n)})},re=function(e){var t=e.isEnabled,n=e.direction,c=void 0===n?q.Direction.HORIZONTAL:n,a=e.value,o=Object(Z.a)(e,["isEnabled","direction","value"]),s=a>.5?"fa-volume-up":0===a?"fa-volume-off":"fa-volume-down";return Object(r.jsxs)("div",{className:"volume-sider-container",children:[Object(r.jsx)("i",{onClick:o.onClick,className:"volumen fa "+s,"aria-hidden":"true"}),Object(r.jsxs)(q.Slider,Object(p.a)(Object(p.a)({isEnabled:t,direction:c,className:"volume-sider",style:{cursor:"pointer"}},o),{},{children:[Object(r.jsx)(te,{className:"position-sider",direction:c,value:a}),Object(r.jsx)(ne,{className:"handler-sider",direction:c,value:a})]}))]})},ce=function(e){Object(V.a)(n,e);var t=Object(z.a)(n);function n(){var e;Object(H.a)(this,n);for(var c=arguments.length,a=new Array(c),o=0;o<c;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={volume:1,previous:1,clicked:!1},e.changeVolume=function(e){T.put("/me/player/volume?volume_percent=".concat(Math.round(100*e)))},e.onOff=function(){e.setState((function(e){return{volume:0,previous:e.volume,clicked:!0}})),e.changeVolume(0)},e.onOn=function(){e.setState((function(e){return{volume:e.previous,clicked:!1}})),e.changeVolume(e.state.previous)},e.onClick=function(){e.state.clicked?0===e.state.volume?e.onOn():e.setState({clicked:!1}):e.onOff()},e.render=function(){return Object(r.jsx)("div",{className:"volume-control-container",children:Object(r.jsx)(re,{value:e.state.volume,onClick:e.onClick,onChange:function(t){e.setState({volume:t})},onChangeEnd:function(t){e.setState({volume:t}),e.changeVolume(t)}})})},e}return n}(c.Component);var ae=G((function(e){function t(e){return e/1e3}var n=t(e.trackPosition)||0,c=e.currentSong?t(e.currentSong.duration_ms):1;return Object(r.jsxs)("div",{className:"player-container",children:[e.currentSong.id?Object(r.jsx)(M,{ids:e.currentSong.linked_from.id?"".concat(e.currentSong.linked_from.id,",").concat(e.currentSong.id):e.currentSong.id,contains:e.contains,songName:e.currentSong.name||"",album:e.currentSong.album.uri.split(":")[2],artists:e.currentSong.artists||[]}):null,Object(r.jsx)(Y,Object(p.a)({},e)),Object(r.jsx)(ee,{isEnabled:!0,value:n/c,position:n,duration:c,onChange:function(t){return e.seekSong(Math.round(t*c*1e3))}}),Object(r.jsx)(ce,{})]})})),oe={position:"fixed",width:"100%",bottom:0,left:0,background:"rgb(40, 40, 40)",height:80,zIndex:2e3},se=function(e){return Object(r.jsx)("div",{className:"footer",style:oe,children:Object(r.jsx)(ae,{})})};var ie=Object(i.b)(null,(function(e){return Object(u.b)({setDeviceId:I,setActiveDevice:R,setStatus:A},e)}))((function(e){var t,n,a="Alltunes App";function o(e){return s.apply(this,arguments)}function s(){return(s=Object(C.a)(w.a.mark((function t(n){return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.setStatus(n),t.next=7;break;case 4:return u(),t.next=7,i();case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function i(){return new Promise((function(e){t=setInterval((function(){n&&n.getCurrentState().then((function(n){null!==n&&(clearInterval(t),e(n))}))}))}))}function u(){clearInterval(undefined)}function l(){return p.apply(this,arguments)}function p(){return(p=Object(C.a)(w.a.mark((function t(){var r;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=window.Spotify.Player,(n=new r({name:a,getOAuthToken:function(){var t=Object(C.a)(w.a.mark((function t(n){var r;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("undefined"===typeof e.access_token){t.next=5;break}return t.next=3,e.access_token;case 3:r=t.sent,n(r);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()})).on("initialization_error",(function(e){console.log(e)})),n.on("authentication_error",(function(e){console.log(e)})),n.on("account_error",(function(e){console.log(e)})),n.on("playback_error",(function(e){console.log(e)})),n.on("player_state_changed",function(){var e=Object(C.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.on("ready",(function(t){e.setDeviceId(t.device_id),e.setActiveDevice(t.device_id)})),n.connect();case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(c.useEffect)((function(){(function(){var e=Object(C.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){"Spotify"in window?e():window.onSpotifyWebPlaybackSDKReady=function(){e()}}));case 2:return e.next=4,l();case 4:return e.next=6,new Promise((function(e){n.on("ready",(function(t){e(t)}))}));case 6:return e.next=8,i();case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(r.jsx)(c.Fragment,{children:e.children})})),ue=n(233),le=n(234),pe=n(236),de=n(232),je=n(239);function be(e){var t=Object(c.useState)(e.songuri),n=Object(g.a)(t,1)[0],a=Object(c.useState)(e.roomKey),o=Object(g.a)(a,2),s=o[0],i=o[1],u=Object(c.useState)(e.access_token),l=Object(g.a)(u,2),p=l[0],d=l[1];return Object(c.useState)((function(){d(e.access_token)}),[e.access_token,p]),Object(c.useState)((function(){i(e.roomKey)}),[e.roomKey,s]),Object(r.jsx)(je.a,{color:"secondary",variant:"contained",onClick:function(){!function(){var e={method:"post",url:"https://api.spotify.com/v1/me/player/queue/?uri=".concat(n),headers:{Authorization:"Bearer "+p}};E()(e).then((function(e){return e})).catch((function(e){throw e}))}()},children:"Queue"})}var fe=n(235),Oe=n(231),me=n(229),he=n(230),ve=(n(151),Object(me.a)((function(e){return{root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:750},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}})));function ye(e){var t=ve(),n=e.host,a=Object(c.useState)(e.roomKey),o=Object(g.a)(a,2),s=o[0],i=o[1],u=Object(c.useState)(e.access_token),l=Object(g.a)(u,2),p=l[0],d=l[1],j=Object(c.useState)([]),b=Object(g.a)(j,2),f=b[0],O=b[1];return Object(c.useState)((function(){d(e.access_token)}),e.access_token),Object(c.useState)((function(){i(e.roomKey)}),e.roomKey),Object(c.useEffect)((function(){var t="ws://"+e.roomIp;new WebSocket(t).onmessage=function(e){try{var t=function(e){return e.reduce((function(e,t){var n={};return n.artists=t.artists.join(", "),n.name=t.name,n.uri=t.uri,n.trackCover=t.trackCover,e.push(n),e}),[])}(JSON.parse(e.data));O(t)}catch(n){console.log(n)}}}),[e.roomIp]),Object(r.jsx)(he.a,{children:Object(r.jsx)(Oe.a,{className:t.paper,children:Object(r.jsx)(de.a,{children:Object(r.jsx)(ue.a,{className:t.table,"aria-labelledby":"tableTitle","aria-label":"enhanced table",children:Object(r.jsx)(le.a,{children:f.map((function(e,t){return Object(r.jsxs)(fe.a,{tabIndex:-1,children:[Object(r.jsx)(pe.a,{align:"left",padding:"none",children:Object(r.jsx)(W,{trackCover:e.trackCover,size:"75px"})}),Object(r.jsx)(pe.a,{align:"left",children:e.artists}),Object(r.jsx)(pe.a,{align:"left",children:e.name}),n?Object(r.jsx)(pe.a,{padding:"checkbox",children:Object(r.jsx)("div",{style:{paddingRight:"10px"},children:Object(r.jsx)(be,{songuri:e.uri,roomKey:s,access_token:p})})}):Object(r.jsx)("div",{})]},e.name)}))})})})})})}n(182);function xe(e){var t=Object(c.useState)(!1),n=Object(g.a)(t,2),a=(n[0],n[1],Object(c.useState)(e.access_token)),o=Object(g.a)(a,2),s=o[0],i=o[1],u=Object(c.useState)(e.roomKey),l=Object(g.a)(u,2),p=l[0],d=l[1];return Object(c.useState)((function(){var t;i(e.access_token),t=e.access_token,T.defaults.headers.common.Authorization="Bearer "+t,localStorage.setItem("token",t)}),e.access_token),Object(c.useState)((function(){d(e.roomKey)}),e.roomKey),Object(r.jsxs)("div",{class:"main",children:[Object(r.jsx)(ie,{access_token:s,children:Object(r.jsx)(se,{})}),Object(r.jsx)("br",{}),Object(r.jsx)(ye,{roomIp:e.roomIp,host:!0,access_token:s,roomKey:p})]})}n(183);var ge=function(e){Object(V.a)(n,e);var t=Object(z.a)(n);function n(){return Object(H.a)(this,n),t.apply(this,arguments)}return Object(B.a)(n,[{key:"render",value:function(){return Object(r.jsx)("section",{children:Object(r.jsx)("div",{class:"main",children:Object(r.jsx)(ye,{})})})}}]),n}(a.a.Component),Se=n(109),ke=n.n(Se),_e=(n(186),"http://34.77.48.74:3000");function we(e){function t(e){var t;return t="".concat(_e,"host"===e?"/loading/":"/userloading/"),"https://accounts.spotify.com/authorize?"+ke.a.stringify({response_type:"token",client_id:"aeedb64c42db49bf8413aab94c44637c",scope:"streaming user-read-private user-read-email user-read-playback-state user-modify-playback-state user-library-modify user-top-read",redirect_uri:t})}return Object(r.jsxs)(he.a,{fixed:!0,children:[Object(r.jsx)("div",{id:"titleText",title:"titleText",className:"titleText",children:"AllTunes"}),Object(r.jsxs)("div",{className:"button_cont",children:[Object(r.jsx)("a",{type:"button",className:"buttoncss",href:t("host"),children:"Host a room"}),Object(r.jsx)("a",{type:"button",className:"buttoncss",href:t("joiner"),children:"Join a room"})]})]})}var Ce="http://35.187.88.243:8000/room";function Ne(e){return Ee.apply(this,arguments)}function Ee(){return(Ee=Object(C.a)(w.a.mark((function e(t){var n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=function(){return new Promise((function(e,n){var r={timeout:"90000",method:"post",url:Ce,headers:{"Content-Type":"application/json"},data:JSON.stringify(t)};return E()(r).then((function(t){e(t.data)})).catch((function(e){console.log(e)}))}))},e.abrupt("return",n());case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Te(e,t){return Re.apply(this,arguments)}function Re(){return(Re=Object(C.a)(w.a.mark((function e(t,n){var r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={method:"put",baseURL:"http://"+n+"/room",headers:{"Content-Type":"application/json"},data:JSON.stringify(t)},console.log(r),e.abrupt("return",E()(r).then((function(e){return e})).catch((function(e){console.log(e)})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ie(e){return Ae.apply(this,arguments)}function Ae(){return(Ae=Object(C.a)(w.a.mark((function e(t){var n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=function(){return new Promise((function(e,n){var r={method:"get",url:Ce,headers:{"Content-Type":"application/json"},data:JSON.stringify(t)};return E()(r).then((function(t){e(t.data)})).catch((function(e){console.log(e)}))}))},e.abrupt("return",n());case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}n(187);function Ke(e){var t=Object(c.useState)(),n=Object(g.a)(t,2),a=n[0],o=n[1];return Object(c.useEffect)((function(){function t(){return(t=Object(C.a)(w.a.mark((function t(){var n,r;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n={token:e.access_token,username:"kevin"}).token||!n.username){t.next=7;break}return t.next=4,Ne(n);case 4:r=t.sent,o(r.roomKey),e.setRoomIp(r.roomIp);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[e.access_token]),a?Object(r.jsx)(k.a,{to:"/hostroom/#roomKey=".concat(a,"&access_token=").concat(e.access_token)}):Object(r.jsx)("div",{class:"loadingText",children:"The page is loading, you will be redirected shortly!"})}var Ue=n(238);n(189);function De(e){var t=Object(c.useState)(!1),n=Object(g.a)(t,2),a=n[0],o=n[1],s=Object(c.useState)(),i=Object(g.a)(s,2),u=i[0],l=i[1],p=Object(c.useState)(),d=Object(g.a)(p,2),j=d[0],b=d[1];function f(){return O.apply(this,arguments)}function O(){return(O=Object(C.a)(w.a.mark((function e(){var t;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie();case 2:t=e.sent,console.log(t),b(t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(){return(m=Object(C.a)(w.a.mark((function t(){return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!j[u]){t.next=7;break}return t.next=4,Te({token:e.access_token,username:"james"},j[u]);case 4:o(!0),t.next=8;break;case 7:f();case 8:t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.error(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})))).apply(this,arguments)}return Object(c.useEffect)((function(){f()}),j),a?Object(r.jsx)(k.a,{to:"/userroom/#roomKey=".concat(u,"&access_token=").concat(e.access_token)}):Object(r.jsxs)("form",{noValidate:!0,id:"form",children:[Object(r.jsx)(Ue.a,{onChange:function(e){l(e.target.value)},id:"standard-basic",label:"Room Key",color:"primary"}),Object(r.jsx)(je.a,{onClick:function(){!function(){m.apply(this,arguments)}()},variant:"contained",color:"primary",children:"Join Room"})]})}var Fe=n(237),Pe=n(110);function Le(){var e=Object(c.useState)(),t=Object(g.a)(e,2),n=t[0],a=t[1],o=Object(c.useState)(),s=Object(g.a)(o,2),i=s[0],u=s[1],l=Object(c.useState)(),p=Object(g.a)(l,2),d=p[0],j=p[1];return Object(c.useEffect)((function(){var e=function(){var e,t={},n=/([^&;=]+)=?([^&;]*)/g,r=window.location.hash.substring(1);for(e=n.exec(r);e;)t[e[1]]=decodeURIComponent(e[2]),e=n.exec(r);return t}();u(e.roomKey),a(e.access_token)}),[i,n]),Object(r.jsx)(Fe.a,{theme:Object(Pe.a)({palette:{type:"dark",primary:{main:"#121212"},secondary:{main:"#1DB954",contrastText:"#FFFFFF"}}}),children:Object(r.jsx)(S.a,{children:Object(r.jsxs)(k.d,{children:[Object(r.jsx)(k.b,{path:"/hostroom",children:Object(r.jsx)(xe,{access_token:n,roomKey:i,roomIp:d})}),Object(r.jsx)(k.b,{path:"/loading",children:Object(r.jsx)(Ke,{access_token:n,roomKey:i,roomIp:d,setRoomIp:j})}),Object(r.jsx)(k.b,{path:"/UserLoading",children:Object(r.jsx)(De,{access_token:n,roomKey:i,roomIp:d})}),Object(r.jsx)(k.b,{path:"/userroom",children:Object(r.jsx)(ge,{access_token:n,roomKey:i,roomIp:d})}),Object(r.jsx)(k.b,{path:"/",children:Object(r.jsx)(we,{access_token:n,roomKey:i,roomIp:d})})]})})})}s.a.render(Object(r.jsx)(i.a,{store:x,children:Object(r.jsx)(Le,{})}),document.getElementById("root"))}},[[190,1,2]]]);
//# sourceMappingURL=main.53b00e9e.chunk.js.map